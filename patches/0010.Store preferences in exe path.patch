From 638cac9e6a9ada394a7bd3ceb0b979cb52c0546c Mon Sep 17 00:00:00 2001
From: Lichtenshtein <altruumann@protonmail.com>
Date: Sun, 7 Dec 2025 03:08:26 +0300
Subject: [PATCH] Store preferences.ini in exe folder

---
diff --git i/src/spek-platform.cc w/src/spek-platform.cc
index 2288789..03ca021 100644
--- i/src/spek-platform.cc
+++ w/src/spek-platform.cc
@@ -24,7 +24,12 @@ void spek_platform_init()
+#ifdef OS_WIN
+wxString spek_platform_config_path(const wxString&)
+#else
 wxString spek_platform_config_path(const wxString& app_name)
+#endif
 {
 #ifdef OS_WIN
-    wxFileName file_name(wxStandardPaths::Get().GetUserConfigDir(), wxEmptyString);
+    wxFileName file_name(wxStandardPaths::Get().GetExecutablePath());
+    file_name.SetFullName("preferences.ini");
 #else
     wxFileName file_name;
     wxString xdg_config_home;
@@ -34,10 +35,10 @@ wxString spek_platform_config_path(const wxString& app_name)
         file_name = wxFileName(wxGetHomeDir(), wxEmptyString);
         file_name.AppendDir(".config");
     }
-#endif
     file_name.AppendDir(app_name);
     file_name.Mkdir(0755, wxPATH_MKDIR_FULL);
-    file_name.SetFullName("preferences");
+    file_name.SetFullName("preferences.ini");
+#endif
     return file_name.GetFullPath();
 }
 
